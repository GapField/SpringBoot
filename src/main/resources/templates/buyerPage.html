<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Real Estate Management</title>

    <!-- Links to Bootstrap assets -->
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" rel="stylesheet">
    <!-- Select2 assets -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet"/>
    <!-- Stylesheet CSS links -->
    <link href="/CSS/style.css" rel="stylesheet">
</head>
<body>
<div class="bg dashboard-SP container-fluid">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid d-flex justify-content-between">
            <a class="navbar-brand m-0" href="#">Real Estate Management</a>
            <div class="menu-btn" id="menuBtn">
                <img src="/Images/hamburger_menu.png" alt="hamburger menu">
            </div>
            <div id="overlay"></div>
            <!-- Navbar Items (Collapsible) -->
            <div class="side-menu justify-content-end" id="sideMenu">
                <ul class="navbar-nav ">
                    <li class="nav-item px-1">
                        <a aria-current="page" class="nav-link" href="#footer">About us</a>
                    </li>
                    <li class="nav-item px-1">
                        <a class="nav-link" href="#footer">Contact</a>
                    </li>
                    <li class="nav-item px-1 " >
                        <button class=" log-in  btn btn-outline-secondary" >
                            <a class="no-underline" href="Dashboard">Log Out</a>
                        </button>
                    </li>
                    <!-- Add more navbar items as needed -->
                </ul>
            </div>
        </div>
    </nav>
</div>
<!-- Needs to be loaded bfr js -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Filters Container-->
<div class="main-container container-fluid p-0" id="get-started">
    <div class="container filters-header">
        <h4 class="title_filters col-lg-12 col-10 px-3 pt-3 ">Search for available properties</h4>
        <div class="menu-btn-filter col-2" id="menuBtnFilter">
            <img src="/Images/filter.png" alt="filters">
        </div>
    </div>

    <!-- Filtering -->
    <div class="pb-3">
        <div class="filtering-box shadow-sm mb-4" id="filtering-box">
            <select class="form-select select2" id="location" style="width: 200px;">
                <option disabled selected value="">Select a Location</option>
            </select>

            <select class="form-select select2" id="propertyType" style="width: 200px;">
                <option disabled selected  value="">Select a Property Type</option>
            </select>

            <select class="form-select select2" id="status" style="width: 200px;">
                <option disabled selected  value="">Status</option>
            </select>

            <select class="form-select select2" id="rooms" style="width: 200px;">
                <option disabled selected value="">Select Rooms</option>
            </select>

            <select class="form-select select2" id="budget" style="width: 200px;">
                <option disabled selected  value="">Budget</option>
            </select>
            <script th:inline="javascript">
                /*<![CDATA[*/
                var jsonProperties = /*[[${jsonProperties}]]*/ '';
                var properties = JSON.parse(jsonProperties);

                var uniqueCities = [...new Set(properties.map(p => p.city))];
                var uniquePropertyTypes = [...new Set(properties.map(p => p.propertyType))];
                var uniqueStatus = [...new Set(properties.map(p => p.listingStatus))];
                var uniqueRooms = [...new Set(properties.map(p => p.rooms))].sort((a, b) => a - b).map(rooms => `${rooms} Rooms`);
                var uniqueBudgets = [...new Set(properties.map(p => p.rentalPrice))].map(price => `$${price}`);

                function setOptions(selectId, options, defaultOption) {
                    var select = document.getElementById(selectId);
                    select.innerHTML = `<option disabled selected value="">${defaultOption}</option>` +
                        options.map(option => `<option value="${option}">${option}</option>`).join('');
                }

                setOptions('location', uniqueCities, 'Select a Location');
                setOptions('propertyType', uniquePropertyTypes, 'Select a Property Type');
                setOptions('status', uniqueStatus, 'Select Status');
                setOptions('rooms', uniqueRooms, 'Select Rooms');
                setOptions('budget', uniqueBudgets, 'Budget');
                /*]]>*/
            </script>
            <!-- Button -->
            <!-- Button -->
            <button class="reset-btn button-search btn btn-outline-secondary col-lg-1 col-3" id="resetButton" name="Reset"
                    type="button">Reset
            </button>
            <button class="search button-search btn btn-outline-secondary col-lg-1 col-3" id="searchButton" name="Search"
                    type="button">Search
            </button>
        </div>
        <!-- Cards-->
        <div class="container-fluid d-flex">
            <!-- Horizontal Cards -->
            <div class="horizontal-card container-fluid" id="data-container">
                <!-- Contact  -->
                <div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="contact"
                     tabindex="-1">
                    <div class="modal-dialog modal-dialog-centered contact-apartment">
                        <div class="modal-content text-center d-flex align-items-center justify-content-center">
                            <div class="mb-3 modal-header container d-flex justify-content-between ">
                                <h5 class="modal-title contact-title col-11" id="log-in">Anbieter kontaktieren</h5>
                                <!-- Close button -->
                                <button type="button" class="btn-close col-1" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <form class="col-md-6">
                                        <div class="form-group">
                                            <label class="p-2" for="Vorname">Vorname*</label>
                                            <input class="form-control" id="VornameC" placeholder="Vorname" type="text">
                                        </div>
                                    </form>
                                    <form class="col-md-6">
                                        <div class="form-group">
                                            <label class="p-2" for="Nachname">Nachname*</label>
                                            <input class="form-control" id="NachnameC" placeholder="Nachname"
                                                   type="text">
                                        </div>
                                    </form>
                                </div>
                                <div class="row">
                                    <form class="col-md-12">
                                        <div class="form-group">
                                            <label class="p-2" for="Email">Email Address*</label>
                                            <input class="form-control" id="EmailC" placeholder="email@example.com"
                                                   type="text">
                                        </div>
                                    </form>
                                </div>
                                <div class="row pb-4">
                                    <form class="col-md-12">
                                        <div class="form-group">
                                            <label class="p-2" for="Nachricht">Ihre Nachricht </label>
                                            <input class="form-control contact-message" id="NachrichtC"
                                                   placeholder="Nachricht"
                                                   type="text">
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="modal-footer container d-flex justify-content-center p-0">
                                <button class="log-in btn btn-outline-secondary px-5 mb-3" type="submit">Contact us</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Horizontal Cards -->
                <div class="container" id="properties-container">
                    <!--Cards dynamically set here-->
                </div>
                <script th:inline="javascript">
                    /*<![CDATA[*/
                    // Access the JSON data from the model
                    const jsonProperties = /*[[${jsonProperties}]]*/ '';

                    // Parse the JSON string to JavaScript object
                    const properties = JSON.parse(jsonProperties);

                    // Get the container element where cards will be added
                    const container = document.getElementById('properties-container');

                    // Iterate over properties and create card elements
                    let cardsHTML = '';
                    properties.forEach(function(property) {
                        cardsHTML += `
                        <div class="card mb-3">
                            <div class="row g-0">
                                <div class="col-md-6">
                                    <img src="/Images/apartment1.jpg" class="img-fluid rounded-start" alt="Property Image">
                                </div>
                                <div class="col-md-6">
                                    <div class="card-body">
                                        <h5 class="card-title pb-2">Real-Estate Nr.: ${property.id}</h5>
                                        <div class="location-container d-flex align-items-center pb-2">
                                            <img src="/Images/location_icon.png" class="img-fluid rounded-start" alt="Location Icon">
                                            <h6 class="card-subtitle text-body-secondary">${property.city} (${property.propertyType})</h6>
                                        </div>
                                        <p class="card-info">Country: ${property.country}</p>
                                        <p class="card-info">Address: ${property.address}</p>
                                        <p class="card-info status">Status: ${property.listingStatus}</p>
                                        <div class="row-card-properties d-flex justify-content-between align-items-center">
                                            <div class="col-md-3">
                                                <p class="card-text">$${property.rentalPrice}</p>
                                            </div>
                                            <div class="col-md-3">
                                                <p class="card-text">${property.squareFootage}m²</p>
                                            </div>
                                            <div class="col-md-3">
                                                <p class="card-text">${property.rooms} Rooms</p>
                                            </div>
                                            <div class="col-md-3 button-contact-center">
                                                <button class="contact-btn btn btn-outline-secondary" data-bs-target="#contact" data-bs-toggle="modal" type="submit">Contact</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>`;
                    });

                    container.innerHTML = cardsHTML;
                    /*]]>*/
                </script>
            </div>
            <!-- Vertical Card -->
            <div class="vertical-card scrollable-container container-fluid col-md-4 p-0 g-0">
                <div class="card-hidden card m-0" id="vcard1">
                    <div class="row g-0">
                        <div class="contact-box  container p-2">
                            <h5 class="contact-title row justify-content-center py-3">Anbieter kontaktieren</h5>
                            <div class="row">
                                <form class="col-md-6">
                                    <div class="form-group">
                                        <label class="p-2" for="Vorname">Vorname*</label>
                                        <input class="form-control" id="Vorname" placeholder="Vorname" type="text">
                                    </div>
                                </form>
                                <form class="col-md-6">
                                    <div class="form-group">
                                        <label class="p-2" for="Nachname">Nachname*</label>
                                        <input class="form-control" id="Nachname" placeholder="Nachname"
                                               type="text">
                                    </div>
                                </form>
                            </div>
                            <div class="row">
                                <form class="col-md-12">
                                    <div class="form-group">
                                        <label class="p-2" for="Email">Email Address*</label>
                                        <input class="form-control" id="Email" placeholder="email@example.com"
                                               type="text">
                                    </div>
                                </form>
                            </div>
                            <div class="row pb-4">
                                <form class="col-md-12">
                                    <div class="form-group">
                                        <label class="p-2" for="Nachricht">Ihre Nachricht </label>
                                        <input class="form-control contact-message" id="Nachricht"
                                               placeholder="Nachricht"
                                               type="text">
                                    </div>
                                </form>
                            </div>
                            <div class="row justify-content-center ">
                                <button class="btn btn-outline-secondary col-md-4 " type="button">Absenden</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<nav aria-label="Page navigation example container d-flex" id="pagination">
    <ul class="pagination container d-flex">
        <li class="page-item">
            <a class="page-link" href="#" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item">
            <a class="page-link" href="#" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>
    </ul>
</nav>

<!-- Footer Section -->
<footer class="footer mt-5 p-4" id="footer">
    <div class="container-fluid g-0">
        <div class="row justify-content-center">
            <!-- Column 1: Über uns -->
            <div class="col-md-4">
                <h5>About us</h5>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus vel eros ligula.</p>
            </div>
            <!-- Column 2: Unterstützung -->
            <div class="col-md-4">
                <h5>Support</h5>
                <ul class="list-unstyled">
                    <li><a class="text-white no-underline " href="#">Help</a></li>
                    <li><a class="text-white no-underline " href="#">Contact</a></li>
                </ul>
            </div>
            <!-- Column 3: Kontakt -->
            <div class="col-md-4">
                <h5>Contact</h5>
                <p>
                    123 Main Street<br>
                    City, State 12345<br>
                    Email: <a class="text-white" href="mailto:info@example.com">info@example.com</a><br>
                    Phone: (123) 456-7890
                </p>
            </div>
        </div>
        <!-- Footer bottom section (optional) -->
        <div class="text-center">
            &copy; 2024 Real Estate Management
        </div>
    </div>
</footer>

<!-- JavaScript Script -->
<!-- Bootstrap JavaScript (required for toggling the collapsed navbar) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="/JavaScript/Pagination.js"></script>
<script src="/JavaScript/ButtonFunctions.js"></script>
<script src="/JavaScript/HamburgerMenu.js"></script>
<script src="/JavaScript/RadioButtonFunction.js"></script>
<script src="/JavaScript/SoldOut.js"></script>
<!-- Links to Bootstrap assets -->
<script crossorigin="anonymous"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Select2 assets -->
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

</body>
</html>